<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户行为差异分析</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body class="slide-page">
    <div class="slide">
        <div class="slide-header">
            <h1 class="slide-title">用户行为差异分析</h1>
            <p class="slide-subtitle">地区用户购买偏好与风险控制</p>
        </div>
        <div class="slide-content two-column">
            <div class="content-section">
                <h2 class="section-title">价格敏感度与退款率分布</h2>
                <div id="behaviorMatrixChart" class="chart-container"></div>
            </div>
            <div class="content-section">
                <h2 class="section-title">风险控制重点</h2>
                <div class="insights-grid">
                    <div class="insight-card warning">
                        <h3>高风险地区</h3>
                        <p>香港、青海退款率超过70%，需重点关注</p>
                    </div>
                    <div class="insight-card">
                        <h3>价格敏感度</h3>
                        <p>84.8%地区价格敏感度中等，可适度调整定价策略</p>
                    </div>
                    <div class="insight-card">
                        <h3>行为类型分布</h3>
                        <p>平衡型用户占主导，价格导向型集中在高价值地区</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // 行为矩阵图表
        const behaviorMatrixChart = echarts.init(document.getElementById('behaviorMatrixChart'));

        const behaviorData = [
            {name: '香港', refund: 1.0, sensitivity: '中敏感'},
            {name: '青海', refund: 0.75, sensitivity: '中敏感'},
            {name: '西藏', refund: 0.6, sensitivity: '中敏感'},
            {name: '云南', refund: 0.69, sensitivity: '中敏感'},
            {name: '重庆', refund: 0.68, sensitivity: '高敏感'},
            {name: '天津', refund: 0.67, sensitivity: '高敏感'},
            {name: '北京', refund: 0.55, sensitivity: '高敏感'},
            {name: '山东', refund: 0.51, sensitivity: '高敏感'},
            {name: '上海', refund: 0.53, sensitivity: '中敏感'},
            {name: '浙江', refund: 0.59, sensitivity: '中敏感'},
            {name: '福建', refund: 0.49, sensitivity: '中敏感'},
            {name: '广东', refund: 0.57, sensitivity: '中敏感'}
        ];

        const behaviorMatrixOption = {
            tooltip: {
                trigger: 'item',
                formatter: function(params) {
                    return `${params.data.name}<br/>退款率: ${(params.data.refund * 100).toFixed(1)}%<br/>价格敏感度: ${params.data.sensitivity}`;
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                top: '10%',
                containLabel: true
            },
            xAxis: {
                type: 'value',
                name: '退款率',
                min: 0,
                max: 1,
                axisLabel: {
                    formatter: '{value}%'
                }
            },
            yAxis: {
                type: 'category',
                name: '地区',
                data: behaviorData.map(item => item.name),
                axisLabel: {
                    interval: 0
                }
            },
            series: [{
                name: '退款率',
                type: 'scatter',
                data: behaviorData.map((item, index) => [item.refund, index]),
                symbolSize: 20,
                itemStyle: {
                    color: function(params) {
                        return params.data[0] > 0.7 ? '#ef4444' :
                               params.data[0] > 0.5 ? '#f59e0b' : '#10b981';
                    }
                }
            }]
        };

        behaviorMatrixChart.setOption(behaviorMatrixOption);

        // 响应式处理
        window.addEventListener('resize', function() {
            behaviorMatrixChart.resize();
        });
    </script>
</body>
</html>