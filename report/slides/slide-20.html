<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>竞争定价分析</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body class="slide-page">
    <div class="slide">
        <div class="slide-header">
            <h1 class="slide-title">竞争定价分析</h1>
            <p class="slide-subtitle">价格接受度和竞争定位分析</p>
        </div>
        <div class="slide-content two-column">
            <div class="content-section">
                <h3 class="section-title">价格接受度分布</h3>
                <div id="acceptance-chart" class="chart-container" style="height: 300px;"></div>
            </div>
            <div class="content-section">
                <h3 class="section-title">竞争定位矩阵</h3>
                <div id="positioning-chart" class="chart-container" style="height: 300px;"></div>
            </div>
        </div>
        <div class="slide-content" style="margin-top: 2rem;">
            <div class="content-section">
                <h3 class="section-title">关键发现</h3>
                <div class="insights-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div class="insight-card">
                        <div class="insight-icon">📈</div>
                        <div class="insight-content">
                            <h4>价格体系稳定</h4>
                            <p>竞争价格体系相对稳定，波动较小</p>
                        </div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-icon">🎯</div>
                        <div class="insight-content">
                            <h4>接受度最高区间</h4>
                            <p>80-120元价格接受度最高</p>
                        </div>
                    </div>
                    <div class="insight-card">
                        <div class="insight-icon">🔗</div>
                        <div class="insight-content">
                            <h4>弱相关性</h4>
                            <p>价格与退款率相关性较弱</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // 价格接受度图表
        const acceptanceChart = echarts.init(document.getElementById('acceptance-chart'));
        const positioningChart = echarts.init(document.getElementById('positioning-chart'));

        // 价格接受度数据
        const acceptanceOption = {
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: ['0-40元', '40-80元', '80-120元', '120-160元', '160-200元', '200+元'],
                axisLabel: {
                    interval: 0
                }
            },
            yAxis: {
                type: 'value',
                name: '接受度指数',
                max: 100
            },
            series: [{
                name: '价格接受度',
                type: 'bar',
                data: [65, 78, 92, 85, 70, 45],
                itemStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        {offset: 0, color: '#3b82f6'},
                        {offset: 1, color: '#1d4ed8'}
                    ])
                },
                markLine: {
                    data: [{
                        type: 'average',
                        name: '平均值'
                    }],
                    label: {
                        formatter: '平均: {c}'
                    }
                }
            }]
        };

        // 竞争定位矩阵
        const positioningOption = {
            tooltip: {
                trigger: 'item',
                formatter: function(params) {
                    return `${params.data[3]}<br/>价格水平: ${params.data[0]}<br/>市场份额: ${params.data[1]}%`;
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value',
                name: '价格水平',
                min: 0,
                max: 100,
                axisLabel: {
                    formatter: '{value}'
                }
            },
            yAxis: {
                type: 'value',
                name: '市场份额(%)',
                min: 0,
                max: 25
            },
            series: [{
                name: '竞争定位',
                type: 'scatter',
                symbolSize: function(data) {
                    return Math.sqrt(data[2]) * 5;
                },
                data: [
                    [25, 18, 25, '超低价策略'],
                    [40, 15, 20, '低价渗透'],
                    [60, 22, 30, '主流市场'],
                    [75, 12, 15, '品质定位'],
                    [90, 8, 10, '高端市场'],
                    [95, 3, 5, '奢侈品定位']
                ],
                itemStyle: {
                    color: function(params) {
                        const colors = ['#ef4444', '#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#ec4899'];
                        return colors[params.dataIndex];
                    }
                }
            }]
        };

        acceptanceChart.setOption(acceptanceOption);
        positioningChart.setOption(positioningOption);

        // 响应式处理
        window.addEventListener('resize', function() {
            acceptanceChart.resize();
            positioningChart.resize();
        });
    </script>
</body>
</html>